DROP PROCEDURE IF EXISTS pro16;
delimiter $$
CREATE PROCEDURE pro16()
begin
	DECLARE _DEPTNO INT;
	DECLARE _DNAME VARCHAR(20);
	DECLARE _LOC VARCHAR(20);
	DECLARE _PWD VARCHAR(20);
	DECLARE _STARTEDON VARCHAR(20);
	
	DECLARE X INT DEFAULT 0;
	
		declare c1 CURSOR for select * from dept ORDER BY DEPTNO DESC;
		/*DECLARE EXIT HANDLER FOR 1329 SELECT "NO ROWS TO EXTRACT" AS R1; */
		open c1;
		LBL:LOOP
		SET X := X + 1;
			fetch c1 into _DEPTNO, _DNAME, _LOC, _PWD, _STARTEDON;
			
			IF X <= 3 THEN
				SELECT _DEPTNO, LCASE(_DNAME), _LOC, _PWD, _STARTEDON;
			ELSE
				LEAVE LBL;
			END IF;
		END LOOP LBL;
		CLOSE C1;
end $$
delimiter ;